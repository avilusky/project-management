<!DOCTYPE html>
<html lang="he" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>××¢×¨×›×ª × ×™×”×•×œ ×¤×¨×•×™×§×˜×™× - ×—×˜×™×‘×ª ×‘×™×˜×•×—×™ ×‘×¨×™××•×ª ×•×¡×™×¢×•×“</title>
    <meta name="description" content="××¢×¨×›×ª × ×™×”×•×œ ×¤×¨×•×™×§×˜×™× ×•××©×™××•×ª ×¤× ×™××™×ª ×œ×—×˜×™×‘×ª ×‘×™×˜×•×—×™ ×‘×¨×™××•×ª ×•×¡×™×¢×•×“ ×‘×¨×©×•×ª ×©×•×§ ×”×”×•×Ÿ">
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-spinner"></div>
        <p>×˜×•×¢×Ÿ × ×ª×•× ×™×...</p>
    </div>

    <div class="app-container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <span class="logo-icon">ğŸ“Š</span>
                    <h1>× ×™×”×•×œ ×¤×¨×•×™×§×˜×™×</h1>
                </div>
                <p class="org-name">×—×˜×™×‘×ª ×‘×™×˜×•×—×™ ×‘×¨×™××•×ª ×•×¡×™×¢×•×“</p>
            </div>

            <nav class="nav-menu">
                <button class="nav-item active" data-page="dashboard">
                    <span class="nav-icon">ğŸ </span>
                    <span class="nav-text">×“×©×‘×•×¨×“</span>
                </button>
                <button class="nav-item" data-page="projects">
                    <span class="nav-icon">ğŸ“</span>
                    <span class="nav-text">×¤×¨×•×™×§×˜×™×</span>
                </button>
                <button class="nav-item" data-page="tasks">
                    <span class="nav-icon">âœ…</span>
                    <span class="nav-text">××©×™××•×ª</span>
                </button>
                <button class="nav-item" data-page="employees">
                    <span class="nav-icon">ğŸ‘¥</span>
                    <span class="nav-text">×¢×•×‘×“×™×</span>
                </button>
            </nav>

            <div class="sidebar-footer">
                <p>×¨×©×•×ª ×©×•×§ ×”×”×•×Ÿ, ×‘×™×˜×•×— ×•×—×™×¡×›×•×Ÿ</p>
                <p class="sync-status" id="sync-status">ğŸŸ¢ ××—×•×‘×¨</p>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-title">
                    <h2 id="page-title">×“×©×‘×•×¨×“</h2>
                    <p class="date-display" id="current-date"></p>
                </div>
                <div class="header-user">
                    <span class="user-avatar">ğŸ‘¤</span>
                    <span class="user-name">×× ×”×œ ××¢×¨×›×ª</span>
                </div>
            </header>

            <!-- Dashboard Page -->
            <div id="dashboard-page" class="page active">
                <div class="stats-grid">
                    <div class="stat-card stat-projects">
                        <div class="stat-icon">ğŸ“</div>
                        <div class="stat-info">
                            <h3 id="total-projects">0</h3>
                            <p>×¤×¨×•×™×§×˜×™× ×¤×¢×™×œ×™×</p>
                        </div>
                    </div>
                    <div class="stat-card stat-tasks">
                        <div class="stat-icon">âœ…</div>
                        <div class="stat-info">
                            <h3 id="total-tasks">0</h3>
                            <p>××©×™××•×ª ×›×•×œ×œ×•×ª</p>
                        </div>
                    </div>
                    <div class="stat-card stat-progress">
                        <div class="stat-icon">ğŸ”„</div>
                        <div class="stat-info">
                            <h3 id="in-progress-tasks">0</h3>
                            <p>××©×™××•×ª ×‘×‘×™×¦×•×¢</p>
                        </div>
                    </div>
                    <div class="stat-card stat-overdue">
                        <div class="stat-icon">âš ï¸</div>
                        <div class="stat-info">
                            <h3 id="overdue-tasks">0</h3>
                            <p>××©×™××•×ª ×‘××™×—×•×¨</p>
                        </div>
                    </div>
                </div>

                <div class="dashboard-content">
                    <div class="card upcoming-tasks-card">
                        <div class="card-header">
                            <h3>××©×™××•×ª ×§×¨×•×‘×•×ª</h3>
                        </div>
                        <div class="card-body">
                            <div id="upcoming-tasks-list" class="tasks-mini-list">
                                <p class="empty-message">××™×Ÿ ××©×™××•×ª ×§×¨×•×‘×•×ª</p>
                            </div>
                        </div>
                    </div>

                    <div class="card recent-projects-card">
                        <div class="card-header">
                            <h3>×¤×¨×•×™×§×˜×™× ××—×¨×•× ×™×</h3>
                        </div>
                        <div class="card-body">
                            <div id="recent-projects-list" class="projects-mini-list">
                                <p class="empty-message">××™×Ÿ ×¤×¨×•×™×§×˜×™×</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Projects Page -->
            <div id="projects-page" class="page">
                <div class="page-actions">
                    <button class="btn btn-primary" id="add-project-btn">
                        <span>â•</span> ×¤×¨×•×™×§×˜ ×—×“×©
                    </button>
                </div>

                <div class="filters-bar">
                    <div class="filter-group">
                        <label>×¡×˜×˜×•×¡:</label>
                        <select id="project-status-filter">
                            <option value="all">×”×›×œ</option>
                            <option value="active">×¤×¢×™×œ</option>
                            <option value="completed">×”×•×©×œ×</option>
                            <option value="paused">××•×©×”×”</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>×× ×”×œ:</label>
                        <select id="project-manager-filter">
                            <option value="all">×”×›×œ</option>
                        </select>
                    </div>
                </div>

                <div id="projects-list" class="projects-grid">
                    <p class="empty-message">××™×Ÿ ×¤×¨×•×™×§×˜×™× ×œ×”×¦×’×”. ×œ×—×¥ ×¢×œ "×¤×¨×•×™×§×˜ ×—×“×©" ×œ×”×•×¡×¤×ª ×¤×¨×•×™×§×˜.</p>
                </div>
            </div>

            <!-- Tasks Page -->
            <div id="tasks-page" class="page">
                <div class="page-actions">
                    <button class="btn btn-primary" id="add-task-btn">
                        <span>â•</span> ××©×™××” ×—×“×©×”
                    </button>
                </div>

                <div class="filters-bar">
                    <div class="filter-group">
                        <label>×¤×¨×•×™×§×˜:</label>
                        <select id="task-project-filter">
                            <option value="all">×”×›×œ</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>×¡×˜×˜×•×¡:</label>
                        <select id="task-status-filter">
                            <option value="all">×”×›×œ</option>
                            <option value="pending">×××ª×™×Ÿ</option>
                            <option value="in-progress">×‘×‘×™×¦×•×¢</option>
                            <option value="completed">×”×•×©×œ×</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>×¢×•×‘×“:</label>
                        <select id="task-employee-filter">
                            <option value="all">×”×›×œ</option>
                        </select>
                    </div>
                </div>

                <div id="tasks-list" class="tasks-table-container">
                    <p class="empty-message">××™×Ÿ ××©×™××•×ª ×œ×”×¦×’×”. ×œ×—×¥ ×¢×œ "××©×™××” ×—×“×©×”" ×œ×”×•×¡×¤×ª ××©×™××”.</p>
                </div>
            </div>

            <!-- Employees Page -->
            <div id="employees-page" class="page">
                <div class="org-chart">
                    <div class="org-level org-level-1">
                        <div class="org-card org-head">
                            <div class="org-avatar">ğŸ‘”</div>
                            <h3>××‘×™ ×¢×•×‘×“×™×”</h3>
                            <p>×× ×”×œ ×—×˜×™×‘×”</p>
                        </div>
                    </div>

                    <div class="org-connector"></div>

                    <div class="org-level org-level-2" id="departments-container">
                        <!-- Departments will be loaded here -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal for Projects -->
    <div id="project-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="project-modal-title">×¤×¨×•×™×§×˜ ×—×“×©</h3>
                <button class="close-modal" data-modal="project-modal">&times;</button>
            </div>
            <form id="project-form">
                <input type="hidden" id="project-id">
                <div class="form-group">
                    <label for="project-name">×©× ×”×¤×¨×•×™×§×˜</label>
                    <input type="text" id="project-name" required>
                </div>
                <div class="form-group">
                    <label for="project-description">×ª×™××•×¨</label>
                    <textarea id="project-description" rows="3"></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="project-manager">×× ×”×œ ××—×¨××™</label>
                        <select id="project-manager" required>
                            <option value="">×‘×—×¨ ×× ×”×œ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="project-status">×¡×˜×˜×•×¡</label>
                        <select id="project-status" required>
                            <option value="active">×¤×¢×™×œ</option>
                            <option value="completed">×”×•×©×œ×</option>
                            <option value="paused">××•×©×”×”</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="project-start-date">×ª××¨×™×š ×”×ª×—×œ×”</label>
                        <input type="date" id="project-start-date" required>
                    </div>
                    <div class="form-group">
                        <label for="project-end-date">×ª××¨×™×š ×™×¢×“</label>
                        <input type="date" id="project-end-date" required>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary close-modal"
                        data-modal="project-modal">×‘×™×˜×•×œ</button>
                    <button type="submit" class="btn btn-primary">×©××•×¨</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal for Tasks -->
    <div id="task-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="task-modal-title">××©×™××” ×—×“×©×”</h3>
                <button class="close-modal" data-modal="task-modal">&times;</button>
            </div>
            <form id="task-form">
                <input type="hidden" id="task-id">
                <div class="form-group">
                    <label for="task-name">×©× ×”××©×™××”</label>
                    <input type="text" id="task-name" required>
                </div>
                <div class="form-group">
                    <label for="task-description">×ª×™××•×¨</label>
                    <textarea id="task-description" rows="3"></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="task-project">×¤×¨×•×™×§×˜</label>
                        <select id="task-project" required>
                            <option value="">×‘×—×¨ ×¤×¨×•×™×§×˜</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="task-assignee">×¢×•×‘×“ ××—×¨××™</label>
                        <select id="task-assignee" required>
                            <option value="">×‘×—×¨ ×¢×•×‘×“</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="task-start-date">×ª××¨×™×š ×”×ª×—×œ×”</label>
                        <input type="date" id="task-start-date" required>
                    </div>
                    <div class="form-group">
                        <label for="task-due-date">×ª××¨×™×š ×™×¢×“</label>
                        <input type="date" id="task-due-date" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="task-priority">×¢×“×™×¤×•×ª</label>
                        <select id="task-priority" required>
                            <option value="low">× ××•×›×”</option>
                            <option value="medium" selected>×‘×™× ×•× ×™×ª</option>
                            <option value="high">×’×‘×•×”×”</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="task-status">×¡×˜×˜×•×¡</label>
                        <select id="task-status" required>
                            <option value="pending">×××ª×™×Ÿ</option>
                            <option value="in-progress">×‘×‘×™×¦×•×¢</option>
                            <option value="completed">×”×•×©×œ×</option>
                        </select>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary close-modal" data-modal="task-modal">×‘×™×˜×•×œ</button>
                    <button type="submit" class="btn btn-primary">×©××•×¨</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="delete-modal" class="modal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h3>××™×©×•×¨ ××—×™×§×”</h3>
                <button class="close-modal" data-modal="delete-modal">&times;</button>
            </div>
            <div class="modal-body">
                <p id="delete-message">×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§?</p>
            </div>
            <div class="form-actions">
                <button type="button" class="btn btn-secondary close-modal" data-modal="delete-modal">×‘×™×˜×•×œ</button>
                <button type="button" class="btn btn-danger" id="confirm-delete-btn">××—×§</button>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        // Import Firebase
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
        import { getFirestore, collection, doc, getDocs, getDoc, addDoc, updateDoc, deleteDoc, query, where, orderBy, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";

        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBGLDedqZH-5LAWMwff3oOj6d-TYA5Mlz8",
            authDomain: "lusky-projects.firebaseapp.com",
            projectId: "lusky-projects",
            storageBucket: "lusky-projects.firebasestorage.app",
            messagingSenderId: "157008994494",
            appId: "1:157008994494:web:f0aecbc074cccea6d7beef"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Make Firebase available globally
        window.firebaseDB = db;
        window.firebaseUtils = { collection, doc, getDocs, getDoc, addDoc, updateDoc, deleteDoc, query, where, orderBy, onSnapshot };

        // Signal that Firebase is ready
        window.dispatchEvent(new Event('firebase-ready'));
    </script>
    <script src="database.js"></script>
    <script src="app.js"></script>
</body>

</html>